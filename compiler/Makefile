# Odds: compiler Makefile
#  - builds and manages all compiler components

OCAMLC=ocamlc
OCAMLLEX=ocamllex
OCAMLYACC=ocamlyacc
OBJS=parser.cmo scanner.cmo

default: generator

generator: $(OBJS)
	ocamlc -o generator generator.ml

all:
	cd ..; make all

scanner.ml: scanner.mll
	$(OCAMLLEX) scanner.mll

parser.ml parser.mli: parser.mly
	$(OCAMLYACC) parser.mly

%.cmo: %.ml
	$(OCAMLC) -c $<

%.cmi: %.mli
	$(OCAMLC) -c $<

.PHONY: clean
clean:
	rm -f generator scanner parser scanner.ml parser.ml parser.mli *.cmo *.cmi

# Generated by ocamldep *.ml *.mli
generator.cmo : ast.cmi
generator.cmx : ast.cmi
parser.cmo : ast.cmi parser.cmi
parser.cmx : ast.cmi parser.cmi
scanner.cmo : parser.cmi
scanner.cmx : parser.cmx
ast.cmi : 
parser.cmi : ast.cmi
